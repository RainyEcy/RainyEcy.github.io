<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Class类文件的结构</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="65208223-d8d7-4c5a-b22f-f4ddc0005b0c" class="page sans"><header><h1 class="page-title">Class类文件的结构</h1></header><div class="page-body"><hr id="da712280-1844-4c68-90c4-86641c4ea57b"/><nav id="6ca5d1fc-9f87-466d-8c7b-b67afd8167e4" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#1f18e567-8b65-433e-9d1d-68d633c6d881">定义</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#8c2a8cea-c11a-4332-afdc-419d465aac6b">Class文件格式表</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#36073577-e3a1-493a-b952-12e641245725">魔数 <code>Magic</code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#00c768ba-2a68-47a3-b88c-2cef172a9e71">Class文件版本 <code>minor_version &amp; major_version</code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#43ed1f6a-ca20-4527-b9f3-9660a7282021">常量池 <code>constant_pool</code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#11753952-3ecc-40d2-b8f9-2b58be1909e1">访问标志 <code>access_flags</code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#72e4cdea-ce77-4738-91e2-1c26e8838992">类索引、父类索引和接口索引集合 <code>this_class &amp; super_class &amp; interfaces</code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#015c42f1-40c5-4b28-b0d5-e738749fc335">字段表集合 <code>field_info</code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4681a1f3-61a2-4bac-8ac0-fc9289a01020">方法表集合 <code>method_info</code></a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#de9167cd-1f1a-4073-9fa6-47388d09b00b">属性表集合 <code>attribute</code></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#7cc7fd36-74ce-4e09-8c5a-044c2b82b4d0"><code>Code</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#05ea82ca-aba4-475c-a7ec-a24e7105afcf"><code>Exceptions</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f402819c-c535-49fa-bef3-1ba827adb8b2"><code>LineNumberTable</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#b596cb97-b1b9-42bf-bbdd-196ab9f1373c"><code>LocalVariableTable &amp; LocalVariableTypeTable</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5d8d6d24-77ee-4469-8b0e-93cb698ecb87"><code>SourceFile &amp; SourceDebugExtension</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#f75af007-213d-41a1-810c-db7b4482d815"><code>ConstantValue</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#8698a1a6-61d4-4aca-8ef4-a6c27a878681"><code>InnerClasses</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5f6f2f6b-2d1c-49bc-a72c-8c2ffc8b0773"><code>Deprecated &amp; Synthetic</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d3710fc7-d986-4320-85e6-b659415f6317"><code>StackMapTable</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#384e3dea-0e65-44b6-aab8-69e54ccc1a62"><code>Signature</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#0bbbf9f4-9a36-481c-840c-de9e7018eaff"><code>BootstrapMethods</code>属性</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#d0f3665a-093c-40c3-ba57-814131ae2f6e">Demo</a></div></nav><h1 id="1f18e567-8b65-433e-9d1d-68d633c6d881" class="">定义</h1><hr id="bc508971-7314-4eaa-82cb-c8b9aa3e2723"/><blockquote id="0c14c985-aaba-45e3-9ce2-ff02a11d9bb7" class="block-color-gray_background"><strong>Class文件是一组以8个字节为基础单位的二进制流，各个数据项目严格按照顺序紧凑的排列在文件之中，中间没有添加任何分隔符，这使得整个Class文件中存储的内容几乎全部是程序运行的必要数据，没有空隙存在。</strong><p id="79bf545d-24aa-481b-8393-16bbdb16f1bb" class="">当遇到需要占用8个字节以上的数据项时，则会按照高位在前的方式分割成若干个8个字节进行存储。</p><p id="75e65642-ea7c-4011-8b59-dcd87b973fc2" class="">根据《Java虚拟机规范》的规定，Class文件格式采用一种类似于C语言结构体的伪结构来存储数据，这种伪结构只有两种数据:<div class="indented"><ul id="f27cc301-fc90-4bda-bf66-a047b7497428" class="bulleted-list"><li style="list-style-type:disc"><strong>无符号数：</strong><p id="220c970b-6004-4443-b5f5-52b681159db8" class="">无符号数属于基本的数据类型，以u1,u2,u4,u8来分别表示1个字节、2个字节</p><p id="bf1fcaea-21f1-4de0-a610-044ce191c48a" class="">、4个字节和8个字节的无符号数，无符号数可以用来描述数字、索引引用、数量值或者按照UTF-8编码构成字符串值。</p></li></ul><ul id="eab7a635-0482-4d3a-a856-cec532ee9fbb" class="bulleted-list"><li style="list-style-type:disc"><strong>表：</strong><p id="e2cd5f80-5817-43b6-b6e9-adba87ef5815" class="">表是由无符号数或者其他表作为数据项构成的复合数据类型，为了便于区分，所有表的命名都习惯性地以“_info”结尾。表用于描述有层次关系的复合结构的数据，整个Class文件本质上也可以视作一张表。</p></li></ul></div></p></blockquote><h1 id="8c2a8cea-c11a-4332-afdc-419d465aac6b" class="">Class文件格式表</h1><hr id="8093452c-94e6-40d1-b48d-7c36acc6a376"/><table id="65c15d3e-b9d4-4364-80ec-4b0856ae0776" class="simple-table"><thead class="simple-table-header"><tr id="3f9104a1-a343-4a9d-b134-7b88359f7455"><th id="cWq[" class="block-color-teal_background simple-table-header" style="width:232.66666666666666px">类型</th><th id="OXpC" class="block-color-teal_background simple-table-header" style="width:232.66666666666666px">名称</th><th id="r;T]" class="block-color-teal_background simple-table-header" style="width:232.66666666666666px">数量</th></tr></thead><tbody><tr id="43ce8dae-5cef-4f21-b8ed-0c180da73788"><td id="cWq[" class="" style="width:232.66666666666666px">u4</td><td id="OXpC" class="" style="width:232.66666666666666px">magic</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="e2f14142-14b0-454c-9dff-7717529341f2"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">minor_version</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="aba13a8a-e6b1-4f66-9826-e92fd81d8171"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">major_version</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="1108d980-0e4a-4cc4-9ddf-72b4f0e49127"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">constant_pool_count</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="2a34c4e7-0601-4292-ad04-75d646a70948"><td id="cWq[" class="" style="width:232.66666666666666px">cp_info</td><td id="OXpC" class="" style="width:232.66666666666666px">constant_pool</td><td id="r;T]" class="" style="width:232.66666666666666px">constant_pool_count - 1</td></tr><tr id="8400457c-828f-4210-8b3e-ccf60a128cee"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">access_flags</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="2c896325-bb2e-4075-b2c6-e8be42d1da81"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">this_class</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="234f2e4f-04db-44c9-baec-e6de2f003dd9"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">super_class</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="76b7aad2-8dac-44c7-b218-a514d0785b0a"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">interfaces_count</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="7bcc6823-8d31-469f-9430-63e612010caa"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">interfaces</td><td id="r;T]" class="" style="width:232.66666666666666px">interfaces_count</td></tr><tr id="ff650ace-a2ec-479f-b928-b0bebf49bc36"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">fields_count</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="2e490fa4-055d-43ba-938a-5e7e837c7cd1"><td id="cWq[" class="" style="width:232.66666666666666px">field_info</td><td id="OXpC" class="" style="width:232.66666666666666px">fields</td><td id="r;T]" class="" style="width:232.66666666666666px">fields_count</td></tr><tr id="85071049-5ea3-4864-a004-7820b9c6e332"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">methods_count</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="7822574e-843e-49b1-85b1-12bef11fd27c"><td id="cWq[" class="" style="width:232.66666666666666px">method_info</td><td id="OXpC" class="" style="width:232.66666666666666px">methods</td><td id="r;T]" class="" style="width:232.66666666666666px">methods_count</td></tr><tr id="89739622-2ad0-4e89-8d04-0fc6ed749b81"><td id="cWq[" class="" style="width:232.66666666666666px">u2</td><td id="OXpC" class="" style="width:232.66666666666666px">attributes_count</td><td id="r;T]" class="" style="width:232.66666666666666px">1</td></tr><tr id="4c5f0a16-888f-4ba9-8802-bdd5fb38ee8e"><td id="cWq[" class="" style="width:232.66666666666666px">attribute_info</td><td id="OXpC" class="" style="width:232.66666666666666px">attributes</td><td id="r;T]" class="" style="width:232.66666666666666px">attributes_count</td></tr></tbody></table><h1 id="36073577-e3a1-493a-b952-12e641245725" class="">魔数 <code>Magic</code></h1><hr id="18df93ba-60e8-47df-b453-2fb0b0cb4045"/><blockquote id="a90ce9f8-b1f7-4888-8542-845bbb6ffbc0" class="block-color-gray_background">每个Class文件的头四个字节称为魔数<code>（Magic Number ）</code> <code>0xCAFEBABE</code>，它的唯一作用是确定这个文件是否为一个能被虚拟机接受的Class文件。<p id="5d205ad3-544d-4f9f-98c8-43faa6891a78" class="">使用魔数而不是扩展名来进行识别主要是基于安全考虑，因为文件扩展名可以随意改动。</p></blockquote><h1 id="00c768ba-2a68-47a3-b88c-2cef172a9e71" class="">Class文件版本 <code>minor_version &amp; major_version</code></h1><hr id="3e273641-751c-4434-b98e-c5f3ee1c598d"/><blockquote id="ccb67a54-34a6-425f-b0db-a3a9b670d5c1" class="block-color-gray_background">魔数后是文件版本，第5和第6个字节是次版本号（<code>Minor Version</code>），第7和第8个字节是主版本号（<code>Major Version</code>）。<strong>文件版本从1.1-45开始。</strong><p id="a7bf9498-0d9f-4a3d-8126-1d624184e08c" class="">高版本的JDK能向下兼容以前版本的Class文件，但是不能运行以后版本的Class文件。</p><p id="2f4f4051-caa8-4405-a1be-81343abbba5f" class="">《Java虚拟机规范》在Class文件校验部分明确要求了即使文件格式并未发生任何变化，虚拟机也必须拒绝执行超过其版本号的Class文件。</p><p id="21647820-8840-4c79-aff4-760470010c96" class="">次版本目前只在Java2出现前短暂使用过。</p></blockquote><h1 id="43ed1f6a-ca20-4527-b9f3-9660a7282021" class="">常量池 <code>constant_pool</code></h1><hr id="502e59b8-f8f6-4083-b0b1-54160159e79e"/><blockquote id="7fb1fb52-ca19-42e9-8c36-da34c126ac39" class="block-color-gray_background">主次版本号之后的是常量池入口，常量池可以比喻为Class文件里的资源仓库，它是Class文件结构中与其他项目关联的最多的数据，通常也是占用Class文件空间最大的数据项目之一。<p id="41bb351d-5bdd-48e7-9cfb-87997a4fbed0" class="">由于常量池中常量的数量是不固定的，所以在常量池的入口需要放置一项u2类型的数据，代表常量池的容量计数值<code>（constant_pool_count）.</code></p><p id="97401fe1-9640-4f35-bd5b-d8fa14486e53" class="">容量计数是从1而不是0开始的，目的在于，如果后面的某些指向常量池的索引值的数据在特定情况下需要表达“不引用任何一个常量池项目”的含义。</p><h3 id="2772eddc-0b59-423c-8ff9-c0a38dcdce2f" class="">常量池中主要存放两大类常量：</h3><ul id="71cdd552-e6e8-46f3-ae9f-6e20c5478226" class="bulleted-list"><li style="list-style-type:disc">字面量（<code>Literal</code>）<ul id="f1e2bebd-f7bd-429d-8315-8d8c59d00469" class="bulleted-list"><li style="list-style-type:circle">文本字符串</li></ul><ul id="67852cbb-ae23-44eb-ad51-d369afc3541f" class="bulleted-list"><li style="list-style-type:circle">声明为final的常量值</li></ul></li></ul><ul id="5b227ff7-7dc9-49db-8167-727d07acbc30" class="bulleted-list"><li style="list-style-type:disc">符号引用（<code>Symbolic References</code>）<ul id="1c2c1e4a-b166-481a-ada9-585f48c2412c" class="bulleted-list"><li style="list-style-type:circle">被模块导出或者开放的包（<code>Package</code>）</li></ul><ul id="b146b2c1-ea70-4eb0-8893-671a1cabb9fb" class="bulleted-list"><li style="list-style-type:circle">类和接口的全限定名（<code>Fully Qualified Name</code>）</li></ul><ul id="9cdc3f37-b0ca-43c0-89d1-946b774568a8" class="bulleted-list"><li style="list-style-type:circle">字段的名称和描述符（<code>Descriptor</code>）</li></ul><ul id="e74f443c-984f-47c1-b50d-78ccb519597d" class="bulleted-list"><li style="list-style-type:circle">方法的名称和描述符</li></ul><ul id="057bcf98-a45a-4433-85c3-43a6bbf0197e" class="bulleted-list"><li style="list-style-type:circle">方法句柄和方法类型（<code>Method Handle、Method Type、Invoke Dynamic</code>）</li></ul><ul id="bf93efb5-80f2-4be8-80b2-6d2102813ecf" class="bulleted-list"><li style="list-style-type:circle">动态调用点和动态常量（<code>Dynamically-Computed Call SIte、Dynamically-Computed Constant</code>）</li></ul></li></ul><p id="4dcb4e28-8987-4489-a89a-1e4d7b27fc41" class="">在Class文件中不会保存各个方法、字段最终在内存中的布局信息，这些字段、方法的符号引用不经过虚拟机在运行期间转换的话是无法得到真正的内存入口地址，也就是无法被虚拟机使用。当虚拟机做类加载时，将会从常量池获得对应的符号引用，再在类创建时或运行时解析翻译到具体的内存当中。</p><p id="7ea1f48a-76c8-4e6a-92fb-28bf8d3863b2" class="">常量池中每一项常量都是一个表，这17类表结构起始的第一位是个u1类型的标志位（<code>tag</code>）代表着当前常量属于哪种常量类型。</p><h3 id="c4aac9e5-8b7d-4186-8f76-a84faa4a366d" class="">常量池项目类型</h3><table id="d0bef552-77a6-4f19-9dc9-f20277dc63c4" class="simple-table"><thead class="simple-table-header"><tr id="2d3dafd6-66d2-4c5f-9d57-5e7cb71428b0"><th id="|Opl" class="block-color-teal_background simple-table-header" style="width:287.328125px">类型</th><th id="a\hi" class="block-color-teal_background simple-table-header" style="width:58.328125px">标志</th><th id="@XKJ" class="block-color-teal_background simple-table-header" style="width:303.328125px">描述</th></tr></thead><tbody><tr id="da749de5-e561-438f-8ea3-a6133239c847"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Utf8_info</td><td id="a\hi" class="" style="width:58.328125px">1</td><td id="@XKJ" class="" style="width:303.328125px">UTF-8编码的字符串</td></tr><tr id="dc768a21-700f-40e2-a857-cccbedcc1202"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Integer_info</td><td id="a\hi" class="" style="width:58.328125px">3</td><td id="@XKJ" class="" style="width:303.328125px">整型字面量</td></tr><tr id="e912b95c-5c1e-482b-9040-7f260b083a22"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Float_info</td><td id="a\hi" class="" style="width:58.328125px">4</td><td id="@XKJ" class="" style="width:303.328125px">浮点型字面量</td></tr><tr id="03de7564-71f1-4a5b-bb6e-fb4fa4da3f6f"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Long_info</td><td id="a\hi" class="" style="width:58.328125px">5</td><td id="@XKJ" class="" style="width:303.328125px">长整型字面量</td></tr><tr id="bd71c5d7-78d2-4202-bc88-06a6ec611e05"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Double_info</td><td id="a\hi" class="" style="width:58.328125px">6</td><td id="@XKJ" class="" style="width:303.328125px">双精度浮点型字面量</td></tr><tr id="056c84a6-bffe-45b5-8578-373ff84068e3"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Class_info</td><td id="a\hi" class="" style="width:58.328125px">7</td><td id="@XKJ" class="" style="width:303.328125px">类或接口的符号引用</td></tr><tr id="97916fc9-6f0d-45d5-a22f-0389a8393702"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_String_info</td><td id="a\hi" class="" style="width:58.328125px">8</td><td id="@XKJ" class="" style="width:303.328125px">字符串类型字面量</td></tr><tr id="c2e6ead4-4c5e-4d96-b7fd-de9b06903f47"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Fieldref_info</td><td id="a\hi" class="" style="width:58.328125px">9</td><td id="@XKJ" class="" style="width:303.328125px">字段的符号引用</td></tr><tr id="52ceb7bb-7ef7-4d6d-8ece-dc9b18e173b9"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Methodref_info</td><td id="a\hi" class="" style="width:58.328125px">10</td><td id="@XKJ" class="" style="width:303.328125px">类中方法的符号引用</td></tr><tr id="049b0e71-6083-46f7-8b6b-58739edbe791"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_InterfaceMethodref_info</td><td id="a\hi" class="" style="width:58.328125px">11</td><td id="@XKJ" class="" style="width:303.328125px">接口方法的符号引用</td></tr><tr id="f07b89d0-b09a-4a03-ac55-187e7cb0b840"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_NameAndType_info</td><td id="a\hi" class="" style="width:58.328125px">12</td><td id="@XKJ" class="" style="width:303.328125px">字段或方法的部分符号引用</td></tr><tr id="4377a83e-c213-48d4-a09a-5376716c6ae4"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_MethodHandle_info</td><td id="a\hi" class="" style="width:58.328125px">15</td><td id="@XKJ" class="" style="width:303.328125px">表示方法句柄</td></tr><tr id="adfe9d62-55cb-4f78-8bd9-75c5538eee95"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_MethodType_info</td><td id="a\hi" class="" style="width:58.328125px">16</td><td id="@XKJ" class="" style="width:303.328125px">表示方法类型</td></tr><tr id="a0c7d9d4-20bd-4b11-bc59-c01d3d40dc5d"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Dynamic_info</td><td id="a\hi" class="" style="width:58.328125px">17</td><td id="@XKJ" class="" style="width:303.328125px">表示一个动态计算常量</td></tr><tr id="060cbf30-5ba5-4ad3-b1b7-272a9fd36758"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_InvokeDynamic_info</td><td id="a\hi" class="" style="width:58.328125px">18</td><td id="@XKJ" class="" style="width:303.328125px">表示一个动态方法调用点</td></tr><tr id="51d338c6-2e7f-4225-ad90-f903b2c5b6c9"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Module_info</td><td id="a\hi" class="" style="width:58.328125px">19</td><td id="@XKJ" class="" style="width:303.328125px">表示一个模块</td></tr><tr id="47bfb1ac-6d80-4354-a20d-7eb6377e1e3f"><td id="|Opl" class="" style="width:287.328125px">CONSTANT_Package_info</td><td id="a\hi" class="" style="width:58.328125px">20</td><td id="@XKJ" class="" style="width:303.328125px">表示一个模块中开放或者导出的包</td></tr></tbody></table><p id="5511e7b7-aefc-4a68-9e29-ed0c059537b5" class="">Class文件中方法、字段等都需要引用CONSTANT_Utf8_info型常量来描述名称。所以CONSTANT_Utf8_info型常量的最大长度就是Java中方法、字段名的最大长度。这里最大长度就是length 的最大值，既u2类型能表达的最大值65535。所以Java程序无法定义超过64KB英文字符的变量或方法，会无法编译。</p><h3 id="c0cdb8a6-a7f1-4836-af80-0f0bcc75674d" class="">Constand_Utf8_info常量结构</h3><table id="821057b2-357b-437f-a14b-63aba5915882" class="simple-table"><thead class="simple-table-header"><tr id="38fb0958-679b-4140-bf10-603034d9318b"><th id="nup_" class="block-color-teal_background simple-table-header" style="width:220.33333333333334px">类型</th><th id="a~Wi" class="block-color-teal_background simple-table-header" style="width:220.33333333333334px">名称</th><th id="wAIp" class="block-color-teal_background simple-table-header" style="width:220.33333333333334px">数量</th></tr></thead><tbody><tr id="9ebd5c42-26f3-4726-80d9-a359cc9deaf6"><td id="nup_" class="" style="width:220.33333333333334px">u1</td><td id="a~Wi" class="" style="width:220.33333333333334px">tag</td><td id="wAIp" class="" style="width:220.33333333333334px">1</td></tr><tr id="ceaa4078-85fe-475c-9ed8-f67245b68514"><td id="nup_" class="" style="width:220.33333333333334px">u2</td><td id="a~Wi" class="" style="width:220.33333333333334px">length</td><td id="wAIp" class="" style="width:220.33333333333334px">1</td></tr><tr id="537d94d8-a578-4ea1-b68a-df93934b17db"><td id="nup_" class="" style="width:220.33333333333334px">u1</td><td id="a~Wi" class="" style="width:220.33333333333334px">bytes</td><td id="wAIp" class="" style="width:220.33333333333334px">length</td></tr></tbody></table></blockquote><h1 id="11753952-3ecc-40d2-b8f9-2b58be1909e1" class="">访问标志 <code>access_flags</code></h1><hr id="93ce8f38-c99d-4101-a993-2e07939ea515"/><blockquote id="51fb6162-69a7-4798-8e15-4f49c1fb53af" class="block-color-gray_background">常量池结束后，紧接着的2个字节代表着访问标志（<code>access_flags</code>），这个标志用于识别一些类或者接口层次的访问信息，包括：<ul id="1a11a773-aa57-4fbf-b65b-c04f6bb0dd82" class="bulleted-list"><li style="list-style-type:disc">类还是接口。</li></ul><ul id="24ea449c-e8bf-49e7-83b4-6a54561c01d7" class="bulleted-list"><li style="list-style-type:disc">是否定义为public类型。</li></ul><ul id="43c3955d-20d2-481d-a369-84b1673a2ce4" class="bulleted-list"><li style="list-style-type:disc">是否定义为abstract类型。</li></ul><ul id="1deec9a1-5447-4125-aa07-c62d06cf56da" class="bulleted-list"><li style="list-style-type:disc">是否被声明为final。</li></ul><ul id="9d0575f9-5f7c-410a-b93b-eff3a32f8fee" class="bulleted-list"><li style="list-style-type:disc">……</li></ul><p id="5a922fd5-e4f0-490c-8219-8bdcb30eb06b" class=""><code>access_flags</code>为u2，共16个标志位可用，当前只定义了9个，没有使用到的标志位一律为零。</p></blockquote><h1 id="72e4cdea-ce77-4738-91e2-1c26e8838992" class="">类索引、父类索引和接口索引集合 <code>this_class &amp; super_class &amp; interfaces</code></h1><hr id="67f3b88d-c87d-4aa0-9680-48522791fa8a"/><blockquote id="1508459a-086d-42ab-9f5d-239594dc19dc" class="block-color-gray_background">类索引、父类索引都是一个u2类型的数据，接口索引是u2类型数据的集合。<p id="310357a8-9ace-400f-9b08-0e666a981f22" class="">Class文件通过这三项数据确认该类型的继承关系。</p><p id="8295fcc3-3730-49d6-a253-3462c3edd2c0" class="">除了Object类，其他的类的父类索引都不为0。</p><h3 id="0f9a54fb-d1f4-43f0-94ad-19b7a0ade0c2" class="">类索引查找过程：</h3><figure id="cfc3b9f9-c551-4f72-a219-c606c2b362c7" class="image"><a href="Class%E7%B1%BB%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%93%E6%9E%84%2065208223d8d74c5ab22ff4ddc0005b0c/2.png"><img style="width:1590px" src="Class%E7%B1%BB%E6%96%87%E4%BB%B6%E7%9A%84%E7%BB%93%E6%9E%84%2065208223d8d74c5ab22ff4ddc0005b0c/2.png"/></a></figure></blockquote><h1 id="015c42f1-40c5-4b28-b0d5-e738749fc335" class="">字段表集合 <code>field_info</code></h1><hr id="a778c422-1486-4cb8-8661-1a99ea08808d"/><blockquote id="12205654-5f17-42d5-b859-e08bf3ad318a" class="block-color-gray_background">字段表用于描述接口或者类中声明的变量。包括类级变量和实例级变量。<h3 id="1d46850d-443b-415f-888e-28791a818ed1" class="">字段可以包括的修饰符：</h3><ul id="e0355a91-fee5-4a7d-bf7b-012633e06f6d" class="bulleted-list"><li style="list-style-type:disc">字段的作用域（<code>public private protected</code>）</li></ul><ul id="3da7fb93-238d-4eff-85b9-07b33ecf8aac" class="bulleted-list"><li style="list-style-type:disc">是实例变量还是类变量（<code>static</code>）</li></ul><ul id="ddc12e81-cff6-47f0-ba12-4dc809876586" class="bulleted-list"><li style="list-style-type:disc">可变性（<code>final</code>）</li></ul><ul id="680f38fc-58f2-4a76-ba89-971cdd48d32d" class="bulleted-list"><li style="list-style-type:disc">并发可见性（<code>volatile</code>）</li></ul><ul id="713eb747-d96b-4b8c-9933-247931da11cb" class="bulleted-list"><li style="list-style-type:disc">可否被序列化（<code>transient</code>）</li></ul><ul id="ec044c37-b3ab-4df5-b1ec-57f4e2f49711" class="bulleted-list"><li style="list-style-type:disc">字段数据类型（基本类型、对象、数组）</li></ul><ul id="12cf4ac8-556c-4930-ab5e-18c3dc2b1827" class="bulleted-list"><li style="list-style-type:disc">字段名称</li></ul><h3 id="b85e1d7b-0844-4ebb-9d3f-bbde4f296798" class="">字段表结构</h3><table id="290e8aff-d887-435a-99ca-dc08fb7a6a7b" class="simple-table"><thead class="simple-table-header"><tr id="c81759d7-1123-47d7-99e4-44c6b06ff262"><th id="BU\&gt;" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="tBPS" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="vTid" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="FNf~" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="0627aa75-82ec-4fdc-86c1-0bf2b5139a6a"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">access_flags</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">访问标志</td></tr><tr id="62cfa0c7-20d6-432e-bbd9-9f7676d43a39"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">name_index</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">简单名称</td></tr><tr id="652ae408-1167-46c9-b0b7-5d8e3a8c9b94"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">descripor_index</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">描述符</td></tr><tr id="b04e3f8e-7f9a-432e-a41e-d67b283dcb80"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">attrinbute_count</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">属性表集合</td></tr><tr id="0ecb38e5-ab5c-46de-b8f0-fd957f97deac"><td id="BU\&gt;" class="" style="width:165.25px">attribute_info</td><td id="tBPS" class="" style="width:165.25px">attributes</td><td id="vTid" class="" style="width:165.25px">attrinbute_count</td><td id="FNf~" class="" style="width:165.25px">属性表内容</td></tr></tbody></table><p id="89eeef35-e990-4e15-8da4-496327905ad2" class=""><strong>字段表集合中不会列出从父类或者接口中继承而来的字段，但有可能出现原本Java代码中不存在的字段，比如在内部类为了保持对外部类的访问性，编译器会自动添加指向外部类实例的字段。</strong></p><p id="fca5ab07-f16f-475f-90d2-75f7b651b45a" class=""><strong>java语言中字段无法重载，但是对于class文件格式来讲，只要描述符不同，可以同时存在。</strong></p></blockquote><h1 id="4681a1f3-61a2-4bac-8ac0-fc9289a01020" class="">方法表集合 <code>method_info</code></h1><hr id="f9c4bb39-ceb8-4bf4-88c9-afd8878247ac"/><blockquote id="7dec77fe-26bb-4c6a-8689-da72cb540c49" class="block-color-gray_background">方法表的结构与字段表一致，方法里的Java代码，经过Javac编译器指令编译成字节码指令后，存放在方法属性表集合中一个名为“Code”的属性里面。<p id="185d9772-8396-48c0-ac47-60fa1e434580" class="">方法表有可能会出现由编译器自动添加的方法，最常见的就是类构造器”&lt;clinit&gt;()”方法和实例构造器”&lt;init&gt;()”方法。</p><h3 id="92f124e5-656f-4b7b-b391-3bba8e6db060" class="">方法表结构</h3><table id="ca8dc9f8-e7c0-48b7-9b91-96d87db5dc7d" class="simple-table"><thead class="simple-table-header"><tr id="dfd00ba7-ba98-4ccc-9909-b7550ee57d18"><th id="BU\&gt;" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="tBPS" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="vTid" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="FNf~" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="2d4cd1ea-e363-4c88-92e0-1b0f9e16ccb1"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">access_flags</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">访问标志</td></tr><tr id="72ed297b-a9d6-45c5-8ac8-5f9757ae5868"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">name_index</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">简单名称</td></tr><tr id="96cb93f3-5f7b-4a01-8092-e0f911ec1cda"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">descripor_index</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">描述符</td></tr><tr id="c0afc248-9a9a-45e9-8cc1-07534639d8fd"><td id="BU\&gt;" class="" style="width:165.25px">u2</td><td id="tBPS" class="" style="width:165.25px">attrinbute_count</td><td id="vTid" class="" style="width:165.25px">1</td><td id="FNf~" class="" style="width:165.25px">属性表集合</td></tr><tr id="05e1efb0-dd2e-4d30-ac3a-27180453f851"><td id="BU\&gt;" class="" style="width:165.25px">attribute_info</td><td id="tBPS" class="" style="width:165.25px">attributes</td><td id="vTid" class="" style="width:165.25px">attrinbute_count</td><td id="FNf~" class="" style="width:165.25px">属性表内容</td></tr></tbody></table></blockquote><h1 id="de9167cd-1f1a-4073-9fa6-47388d09b00b" class="">属性表集合 <code>attribute</code></h1><hr id="5e841ace-e99c-44b9-8547-f6fb18a540e5"/><blockquote id="3b6479f3-84a8-4807-9ac2-436e84b2d4bd" class="block-color-gray_background">Class文件、字段表、方法表都可以携带自己的属性表集合，以描述某些场景专有的信息。<p id="590b894f-95f1-475e-a39d-9d18d581e4c0" class="">《Java虚拟机规范》允许只要不与已有属性名重复，任何人实现的编译器都可以向属性表中写入自己定义的属性信息，Java虚拟机会忽略到它不认识的属性。</p></blockquote><h2 id="7cc7fd36-74ce-4e09-8c5a-044c2b82b4d0" class=""><code>Code</code>属性</h2><hr id="c6c18438-adcf-48e3-bbf9-f125dc2d4eb2"/><blockquote id="2e32ea42-48d2-4646-b658-ed756909cfb2" class="block-color-gray_background">Java程序方法体里面的代码经过Javac编译器处理之后，最终变为字节码指令存储在Code属性。Code属性出现在方法表的属性集合之中。<h3 id="20e395c1-f9db-4891-ba42-f8c54952bce5" class="">Code属性表结构</h3><table id="d80e69a8-b8b5-4684-adf6-2b5f854c7163" class="simple-table"><thead class="simple-table-header"><tr id="07b44b98-329d-42af-b0eb-456b10fe0abf"><th id="Nsle" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="cpvE" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="XY^t" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="\F;^" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="34e99298-a95e-45bf-93f3-d4add578715f"><td id="Nsle" class="" style="width:165.25px">u2</td><td id="cpvE" class="" style="width:165.25px">attribute_name_index</td><td id="XY^t" class="" style="width:165.25px">1</td><td id="\F;^" class="" style="width:165.25px">指向Utf8常量的索引，固定为‘Code’</td></tr><tr id="fd4cdfb2-67b3-485b-a01e-85da0983c078"><td id="Nsle" class="" style="width:165.25px">u4</td><td id="cpvE" class="" style="width:165.25px">attribute_length</td><td id="XY^t" class="" style="width:165.25px">1</td><td id="\F;^" class="" style="width:165.25px">属性长度（不含名称+长度 的6字节）</td></tr><tr id="a3415012-b10f-43bd-ad5d-bf6114a8b9e8"><td id="Nsle" class="" style="width:165.25px">u2</td><td id="cpvE" class="" style="width:165.25px">max_stack</td><td id="XY^t" class="" style="width:165.25px">1</td><td id="\F;^" class="" style="width:165.25px">最大操作数栈深度</td></tr><tr id="fdbf1d90-55e2-463f-9735-e92f6d8caccb"><td id="Nsle" class="" style="width:165.25px">u2</td><td id="cpvE" class="" style="width:165.25px">max_locals</td><td id="XY^t" class="" style="width:165.25px">1</td><td id="\F;^" class="" style="width:165.25px">最大局部变量槽Slot</td></tr><tr id="8b823520-ef93-4029-84d7-2d97e1aa61c8"><td id="Nsle" class="" style="width:165.25px">u4</td><td id="cpvE" class="" style="width:165.25px">code_length</td><td id="XY^t" class="" style="width:165.25px">1</td><td id="\F;^" class="" style="width:165.25px">字节码指令长度</td></tr><tr id="5ed722f0-26c5-47b5-ac44-0c79450588b3"><td id="Nsle" class="" style="width:165.25px">u1</td><td id="cpvE" class="" style="width:165.25px">code</td><td id="XY^t" class="" style="width:165.25px">code_length</td><td id="\F;^" class="" style="width:165.25px">具体字节码</td></tr><tr id="635bb5af-9f9b-47cf-a48d-f0518020db60"><td id="Nsle" class="" style="width:165.25px">u2</td><td id="cpvE" class="" style="width:165.25px">exception_table_length</td><td id="XY^t" class="" style="width:165.25px">1</td><td id="\F;^" class="" style="width:165.25px">方法异常表长度</td></tr><tr id="183094e4-4188-44f4-8e5f-dedbd8434715"><td id="Nsle" class="" style="width:165.25px">exception_info</td><td id="cpvE" class="" style="width:165.25px">exception_table</td><td id="XY^t" class="" style="width:165.25px">exception_table_length</td><td id="\F;^" class="" style="width:165.25px">异常表内容</td></tr><tr id="b12fbf6c-29c4-4766-b1d9-d3fe46622f95"><td id="Nsle" class="" style="width:165.25px">u2</td><td id="cpvE" class="" style="width:165.25px">attributes_count</td><td id="XY^t" class="" style="width:165.25px">1</td><td id="\F;^" class="" style="width:165.25px">方法属性长度</td></tr><tr id="16ead8ef-639a-4ba6-8b96-331a897dd204"><td id="Nsle" class="" style="width:165.25px">attribute_info</td><td id="cpvE" class="" style="width:165.25px">attrubutes</td><td id="XY^t" class="" style="width:165.25px">attributes_count</td><td id="\F;^" class="" style="width:165.25px">方法属性内容</td></tr></tbody></table><h3 id="274e7773-e924-479b-9673-565be5c03750" class="">注意：</h3><ul id="4694c640-53e9-424b-a1ea-00dcab85cfc4" class="bulleted-list"><li style="list-style-type:disc"><code>max_local</code>局部变量槽为了避免浪费，Java虚拟机的做法是将局部变量表中的变量槽进行重用，当代码执行超过一个局部变量的作用域时，这个局部变量作用域可以被其他局部变量所使用。</li></ul><ul id="3c4cdf4a-8d37-45ae-ae19-d96a48964b4a" class="bulleted-list"><li style="list-style-type:disc"><code>code_length</code>是一个u4类型的长度值，理论上最大值可以达到2的32次幂，但是《Java虚拟机规范》明确限制一个方法不能超过65535条智力高，所以实际使用了u2的长度，超过限制，编译器就会拒绝编译。</li></ul><ul id="86e40b9b-fd49-4bfa-a417-60db40e14c5e" class="bulleted-list"><li style="list-style-type:disc"><code>Args_size</code>默认会带上this参数，所以无参方法的值也为1，除非方法为static方法。</li></ul><h3 id="a3258e9e-e914-4b6a-9297-495c975a6dd5" class="">属性表异常结构</h3><table id="ca2ed990-2866-4217-941b-a4cd093110c7" class="simple-table"><thead class="simple-table-header"><tr id="b3916fd0-2bae-430a-9b13-31c3faa1a949"><th id="]?GP" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="E_;:" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="A?=Y" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="cUF=" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="d087922b-b57d-4729-85f4-36199e1b6b27"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">start_pc</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">字节码开始行</td></tr><tr id="e8958495-bf59-41a1-8871-e32b35879fd4"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">end_pc</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">字节码结束行（不含）</td></tr><tr id="27e07a36-9d07-4a4d-b86c-12337384cf72"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">handler_pc</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">转到第几行处理</td></tr><tr id="dc3cb6cd-8da5-4862-8038-895e56d306b9"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">catch_type</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">捕捉的异常，指向异常Class常量的索引</td></tr></tbody></table></blockquote><h2 id="05ea82ca-aba4-475c-a7ec-a24e7105afcf" class=""><code>Exceptions</code>属性</h2><blockquote id="ea9af82e-11ba-4386-956e-ec704db1536a" class="block-color-gray_background">列举出方法中可能抛出的受查异常（<code>Checked Exception</code>），也就是方法描述时在throws关键字后面列举出的异常。<h3 id="4730e5d4-4eb3-4451-bba9-4e198df6a2bb" class="">Exceptions属性结构</h3><table id="900425ce-6491-470f-9fc1-bcb663dd9c25" class="simple-table"><thead class="simple-table-header"><tr id="2d7baf41-70d5-4e61-ae04-f60cee46f003"><th id="]?GP" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="E_;:" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="A?=Y" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="cUF=" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="79ca5909-a669-4e0f-89b1-c363b94fd508"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">attribute_index</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">固定指向“Exceptions”的索引</td></tr><tr id="8feaa2cc-ad40-4ae0-9a28-fe0bec1018bb"><td id="]?GP" class="" style="width:165.25px">u4</td><td id="E_;:" class="" style="width:165.25px">attribute_length</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">异常长度</td></tr><tr id="6bd85c71-ef06-4da4-bc0f-5bd399651e2c"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">number_of_exception</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">异常个数</td></tr><tr id="1215747f-a9ec-4c96-b5bb-6dae1bb7fe66"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">exceotion_index_table</td><td id="A?=Y" class="" style="width:165.25px">number_of_exception</td><td id="cUF=" class="" style="width:165.25px">指向代表异常的utf8常量索引</td></tr><tr id="94eda288-2860-4dcc-8228-08c9c87601cb"><td id="]?GP" class="" style="width:165.25px"></td><td id="E_;:" class="" style="width:165.25px"></td><td id="A?=Y" class="" style="width:165.25px"></td><td id="cUF=" class="" style="width:165.25px"></td></tr></tbody></table></blockquote><h2 id="f402819c-c535-49fa-bef3-1ba827adb8b2" class=""><code>LineNumberTable</code>属性</h2><blockquote id="d157527d-742c-4a0a-b6b4-80d6b500711b" class="block-color-gray_background">描述Java源码行号与字节码行号（偏移量）之间的对应关系。<p id="92faf2c8-a400-49cf-894f-1ecde78261b2" class="">并不是运行时的必须属性，默认生成，可以在Javac中使用<code>-g:none</code> 或者<code> -g:lines </code>选项来取消生成这项信息。</p><p id="9a9027d7-a485-4975-b43d-f084942930ef" class="">如果不生成这项信息，如果代码出现异常，堆栈不会显示出错的行号，并且在调试时无法通过源码行来设置断点。</p><h3 id="8d99e6b2-dec0-4768-a3ab-b5002b65ec5b" class="">LineNumberTable属性结构</h3><table id="af57fa26-504a-4bf0-b397-0ceaf541c35b" class="simple-table"><thead class="simple-table-header"><tr id="7efdd386-56c5-41b8-8a0d-ca5a1dc9c524"><th id="]?GP" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="E_;:" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="A?=Y" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="cUF=" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="829856fc-e8ec-47cd-9f98-694edf2a6c44"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">attribute_index</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">固定指向“LineNumberTable”的索引</td></tr><tr id="d1f9bdb1-9ec6-4529-b171-7baaa0e873a7"><td id="]?GP" class="" style="width:165.25px">u4</td><td id="E_;:" class="" style="width:165.25px">attribute_length</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">长度</td></tr><tr id="3bd254bd-faf5-450d-8ea5-52b0b037cf21"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">line_number_table_length</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">个数</td></tr><tr id="77b474ac-b1b2-46f2-9779-311fe990006a"><td id="]?GP" class="" style="width:165.25px">line_number_table_info</td><td id="E_;:" class="" style="width:165.25px">line_number_table</td><td id="A?=Y" class="" style="width:165.25px">line_number_table_length</td><td id="cUF=" class="" style="width:165.25px">包含start_pc(字节码行号)和 line_number(源码行号)</td></tr></tbody></table></blockquote><h2 id="b596cb97-b1b9-42bf-bbdd-196ab9f1373c" class=""><code>LocalVariableTable &amp; LocalVariableTypeTable</code>属性</h2><blockquote id="d772f711-fd03-468e-9cec-cb939d9d5cd0" class="block-color-gray_background">LocalVariableTable属性用于描述栈帧中局部变量表的变量与Java源码种定义的变量之间的关系。并非必须属性，可以在Javac中使用<code>-g:none</code> 或者<code> -g:vars </code>选项来取消生成这项信息。<p id="195647f5-fd85-40aa-a6e6-c4209ada2798" class="">如果不生成这项信息，最大的影响是他人调用时所有的参数名称都会消失，IDE会用arg1等占位符来替代。</p><p id="501f5331-07e5-48de-8a2a-ea48b53037ee" class=""><code>LocalVariableTypeTable</code>为<code>LocalVariableTable</code>的泛型版本。</p><h3 id="96803442-2999-41e4-a7bc-89f9beb4676a" class="">LocalVariableTable属性结构</h3><table id="361866fa-89b5-48c2-b087-b49e9606d83b" class="simple-table"><thead class="simple-table-header"><tr id="7293e8f6-0fe9-4384-aba8-2843a077a170"><th id="]?GP" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="E_;:" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="A?=Y" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="cUF=" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="016c8d65-ea0b-40b0-b02d-fc58c654b0c9"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">attribute_index</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">固定指向“LocalVariableTable”的索引</td></tr><tr id="6eaece31-99dd-4bd9-83da-dfa1271e97dc"><td id="]?GP" class="" style="width:165.25px">u4</td><td id="E_;:" class="" style="width:165.25px">attribute_length</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">长度</td></tr><tr id="f822aa30-c636-4de3-a93f-1a2c1a49ef75"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">line_variable_table_length</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">个数</td></tr><tr id="db8d7f79-65a7-44c6-84d8-b9f600e122c7"><td id="]?GP" class="" style="width:165.25px">line_variable_info</td><td id="E_;:" class="" style="width:165.25px">line_variable_table</td><td id="A?=Y" class="" style="width:165.25px">line_variable_table_length</td><td id="cUF=" class="" style="width:165.25px"></td></tr></tbody></table><h3 id="7d5b920e-3718-4772-97f0-e70e89d5ae1a" class="">line_variable_info属性结构</h3><table id="2ce0bff4-b133-4682-a46d-fa87000a7193" class="simple-table"><thead class="simple-table-header"><tr id="686d6d61-098a-4b2a-b645-a2d8b9efe435"><th id="]?GP" class="block-color-teal_background simple-table-header" style="width:165.25px">类型</th><th id="E_;:" class="block-color-teal_background simple-table-header" style="width:165.25px">名称</th><th id="A?=Y" class="block-color-teal_background simple-table-header" style="width:165.25px">数量</th><th id="cUF=" class="block-color-teal_background simple-table-header" style="width:165.25px">含义</th></tr></thead><tbody><tr id="80f5776c-232d-4eb0-8753-601b041c29c6"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">start_pc</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">字节码行数</td></tr><tr id="4ca4953e-2b48-443d-9fe1-e6998c3c8bf8"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">length</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">生命周期长度</td></tr><tr id="9fc86205-f6d9-485d-98b3-d064ed756dfa"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">name_index</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">名称常量索引</td></tr><tr id="07de75de-75fd-4006-ada7-f2fcff78b975"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">descriptor_index</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">描述符常量索引</td></tr><tr id="99df8a36-65b2-45cc-8f1b-755c2189549d"><td id="]?GP" class="" style="width:165.25px">u2</td><td id="E_;:" class="" style="width:165.25px">index</td><td id="A?=Y" class="" style="width:165.25px">1</td><td id="cUF=" class="" style="width:165.25px">局部变量槽位置</td></tr></tbody></table></blockquote><h2 id="5d8d6d24-77ee-4469-8b0e-93cb698ecb87" class=""><code>SourceFile &amp; SourceDebugExtension</code>属性</h2><blockquote id="b589b480-dc9b-46a3-8980-80c469f8e259" class="block-color-gray_background">SourceFIle属性用来记录生成这个Class文件的源码文件名称。<p id="05b382f9-2009-4eac-ad51-2c41c8128075" class="">并非必须属性，可以在Javac中使用<code>-g:none</code> 或者<code> -g:source </code>选项来取消生成这项信息。</p><p id="3c8d4ed1-58eb-45f0-ae93-8388f4f3c226" class="">如果不生成这项信息，抛出异常时堆栈不会显示出错代码的所属的文件名。</p></blockquote><h2 id="f75af007-213d-41a1-810c-db7b4482d815" class=""><code>ConstantValue</code>属性</h2><blockquote id="9ba41270-28c7-42da-8cb5-13eabb47c962" class="block-color-gray_background">通知虚拟机自动为静态变量赋值。<p id="25826053-0d59-4049-b7bd-31a7a42d0bb3" class="">只能局限于基本数据类型和String。</p></blockquote><h2 id="8698a1a6-61d4-4aca-8ef4-a6c27a878681" class=""><code>InnerClasses</code>属性</h2><blockquote id="4f44aa62-287f-4475-abe2-4e8c7374eceb" class="block-color-gray_background">用于记录内部类与宿主类之间的关联。有内部类则会自动生成。</blockquote><h2 id="5f6f2f6b-2d1c-49bc-a72c-8c2ffc8b0773" class=""><code>Deprecated &amp; Synthetic</code>属性</h2><blockquote id="cd684922-d0d2-43e3-83a9-776608cf9f73" class="block-color-gray_background">Deprecated用来表示某个类型、字段或者方法被弃用。<p id="b30e3e86-9fcb-43cf-9325-67226a80a76b" class="">Synthetic用来表示次不是由Java源码产生的。</p></blockquote><h2 id="d3710fc7-d986-4320-85e6-b659415f6317" class=""><code>StackMapTable</code>属性</h2><blockquote id="c7cd185d-3b8b-434c-99ae-34682b8062cf" class="block-color-gray_background">这个属性会在虚拟机类加载的字节码验证阶段被新类型检查验证器使用（Type Checker）使用，目的在于代替以前比较消耗性能的基于数据流分析的类型推导验证器。</blockquote><h2 id="384e3dea-0e65-44b6-aab8-69e54ccc1a62" class=""><code>Signature</code>属性</h2><blockquote id="9ae4f6cc-3f72-4deb-bd49-3157832bb1f1" class="block-color-gray_background">  泛型使用</blockquote><h2 id="0bbbf9f4-9a36-481c-840c-de9e7018eaff" class=""><code>BootstrapMethods</code>属性</h2><blockquote id="1805beb0-6314-4d56-87a6-877b5a5cce74" class="block-color-gray_background"><mark class="highlight-gray_background">用于保存invokedynamic指令引用的引导方法限定符。</mark></blockquote><p id="b7de6c39-e720-4e7a-8e6c-a2386b54a177" class="">
</p><h1 id="d0f3665a-093c-40c3-ba57-814131ae2f6e" class="">Demo</h1><blockquote id="08f5f3e1-29c7-41ab-baa5-e4d51eb9cc8e" class="">代码示例：<pre id="538a4a4c-2616-4fc5-bde8-0b508b71965c" class="code"><code>package org.fenixsoft.clazz;

public class TestClass {

    public static String str = &quot;ecy test&quot;;

    class InnerClass {
        private int y;
    }

    private int m;

    @Deprecated
    public int inc() throws NullPointerException, StackOverflowError, IndexOutOfBoundsException {
        return m + 1;
    }

    public int exception() {
        int i;
        try {
            i = 1;
            return i;
        } catch (NullPointerException e) {
            i = 2;
            return i;
        } finally {
            i = 3;
        }
    }

}</code></pre><p id="dfbfd3ad-163f-49bf-ad59-909f2fa674d4" class="">编译出的Class字节码文件：</p><pre id="8c2564f3-aa29-48f2-bf70-e4fbc4da0a7a" class="code"><code>警告: 文件 ./study/target/classes/org/fenixsoft/clazz/TestClass.class 不包含类 study.target.classes.org.fenixsoft.clazz.TestClass
Classfile /Users/yichenyu/Documents/Ecy/project/In-depth-understanding-jvm/study/target/classes/org/fenixsoft/clazz/TestClass.class
  Last modified 2022年7月22日; size 1147 bytes
  MD5 checksum c628f7b4aa7805d56d5523d41f03f336
  Compiled from &quot;TestClass.java&quot;
public class org.fenixsoft.clazz.TestClass
  minor version: 0
  major version: 55
  flags: (0x0021) ACC_PUBLIC, ACC_SUPER
  this_class: #6                          // org/fenixsoft/clazz/TestClass
  super_class: #7                         // java/lang/Object
  interfaces: 0, fields: 2, methods: 4, attributes: 3
Constant pool:
   #1 = Methodref          #7.#40         // java/lang/Object.&quot;&lt;init&gt;&quot;:()V
   #2 = Fieldref           #6.#41         // org/fenixsoft/clazz/TestClass.m:I
   #3 = Class              #42            // java/lang/NullPointerException
   #4 = String             #43            // ecy test
   #5 = Fieldref           #6.#44         // org/fenixsoft/clazz/TestClass.str:Ljava/lang/String;
   #6 = Class              #45            // org/fenixsoft/clazz/TestClass
   #7 = Class              #46            // java/lang/Object
   #8 = Class              #47            // org/fenixsoft/clazz/TestClass$InnerClass
   #9 = Utf8               InnerClass
  #10 = Utf8               InnerClasses
  #11 = Utf8               str
  #12 = Utf8               Ljava/lang/String;
  #13 = Utf8               m
  #14 = Utf8               I
  #15 = Utf8               &lt;init&gt;
  #16 = Utf8               ()V
  #17 = Utf8               Code
  #18 = Utf8               LineNumberTable
  #19 = Utf8               LocalVariableTable
  #20 = Utf8               this
  #21 = Utf8               Lorg/fenixsoft/clazz/TestClass;
  #22 = Utf8               inc
  #23 = Utf8               ()I
  #24 = Utf8               Exceptions
  #25 = Class              #48            // java/lang/StackOverflowError
  #26 = Class              #49            // java/lang/IndexOutOfBoundsException
  #27 = Utf8               Deprecated
  #28 = Utf8               RuntimeVisibleAnnotations
  #29 = Utf8               Ljava/lang/Deprecated;
  #30 = Utf8               exception
  #31 = Utf8               i
  #32 = Utf8               e
  #33 = Utf8               Ljava/lang/NullPointerException;
  #34 = Utf8               StackMapTable
  #35 = Class              #50            // java/lang/Throwable
  #36 = Utf8               &lt;clinit&gt;
  #37 = Utf8               SourceFile
  #38 = Utf8               TestClass.java
  #39 = Utf8               NestMembers
  #40 = NameAndType        #15:#16        // &quot;&lt;init&gt;&quot;:()V
  #41 = NameAndType        #13:#14        // m:I
  #42 = Utf8               java/lang/NullPointerException
  #43 = Utf8               ecy test
  #44 = NameAndType        #11:#12        // str:Ljava/lang/String;
  #45 = Utf8               org/fenixsoft/clazz/TestClass
  #46 = Utf8               java/lang/Object
  #47 = Utf8               org/fenixsoft/clazz/TestClass$InnerClass
  #48 = Utf8               java/lang/StackOverflowError
  #49 = Utf8               java/lang/IndexOutOfBoundsException
  #50 = Utf8               java/lang/Throwable
{
  public static java.lang.String str;
    descriptor: Ljava/lang/String;
    flags: (0x0009) ACC_PUBLIC, ACC_STATIC

  public org.fenixsoft.clazz.TestClass();
    descriptor: ()V
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=1, args_size=1
         0: aload_0
         1: invokespecial #1                  // Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V
         4: return
      LineNumberTable:
        line 3: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       5     0  this   Lorg/fenixsoft/clazz/TestClass;

  public int inc() throws java.lang.NullPointerException, java.lang.StackOverflowError, java.lang.IndexOutOfBoundsException;
    descriptor: ()I
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=2, locals=1, args_size=1
         0: aload_0
         1: getfield      #2                  // Field m:I
         4: iconst_1
         5: iadd
         6: ireturn
      LineNumberTable:
        line 15: 0
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            0       7     0  this   Lorg/fenixsoft/clazz/TestClass;
    Exceptions:
      throws java.lang.NullPointerException, java.lang.StackOverflowError, java.lang.IndexOutOfBoundsException
    Deprecated: true
    RuntimeVisibleAnnotations:
      0: #29()
        java.lang.Deprecated

  public int exception();
    descriptor: ()I
    flags: (0x0001) ACC_PUBLIC
    Code:
      stack=1, locals=5, args_size=1
         0: iconst_1
         1: istore_1
         2: iload_1
         3: istore_2
         4: iconst_3
         5: istore_1
         6: iload_2
         7: ireturn
         8: astore_2
         9: iconst_2
        10: istore_1
        11: iload_1
        12: istore_3
        13: iconst_3
        14: istore_1
        15: iload_3
        16: ireturn
        17: astore        4
        19: iconst_3
        20: istore_1
        21: aload         4
        23: athrow
      Exception table:
         from    to  target type
             0     4     8   Class java/lang/NullPointerException
             0     4    17   any
             8    13    17   any
            17    19    17   any
      LineNumberTable:
        line 21: 0
        line 22: 2
        line 27: 4
        line 22: 6
        line 23: 8
        line 24: 9
        line 25: 11
        line 27: 13
        line 25: 15
        line 27: 17
        line 28: 21
      LocalVariableTable:
        Start  Length  Slot  Name   Signature
            2       6     1     i   I
            9       8     2     e   Ljava/lang/NullPointerException;
           11       6     1     i   I
            0      24     0  this   Lorg/fenixsoft/clazz/TestClass;
           21       3     1     i   I
      StackMapTable: number_of_entries = 2
        frame_type = 72 /* same_locals_1_stack_item */
          stack = [ class java/lang/NullPointerException ]
        frame_type = 72 /* same_locals_1_stack_item */
          stack = [ class java/lang/Throwable ]

  static {};
    descriptor: ()V
    flags: (0x0008) ACC_STATIC
    Code:
      stack=1, locals=0, args_size=0
         0: ldc           #4                  // String ecy test
         2: putstatic     #5                  // Field str:Ljava/lang/String;
         5: return
      LineNumberTable:
        line 5: 0
}
SourceFile: &quot;TestClass.java&quot;
NestMembers:
  org/fenixsoft/clazz/TestClass$InnerClass
InnerClasses:
  #9= #8 of #6;                           // InnerClass=class org/fenixsoft/clazz/TestClass$InnerClass of class org/fenixsoft/clazz/TestClass</code></pre></blockquote></div></article></body></html>